<section id='prompt' ng-show='showAdmin'>
  <header class='header'>
    <h2 ng-if='adding'>Add a widget</h2>
    <h2 ng-if='updating'>Updating "{{widget.config.title}}"</h2>
  </header>

  <section class='body'>
    <!-- META -->    
    <section class='meta'>
      <div class='field'>
        <label>Name</label>
        <input type='text' ng-model='widget.config.title'>
      </div>

      <fieldset>
        <legend>Position</legend>
        <div class='field'>
          <label>Row</label>
          <input type='number' ng-model='widget.layout.row'>
        </div>
        <div class='field'>
          <label>Column</label>
          <input type='number' ng-model='widget.layout.column'>
        </div>
        <div class='field'>
          <label>Width</label>
          <input type='number' ng-model='widget.layout.width'>
        </div>
        <div class='field'>
          <label>Height</label>
          <input type='number' ng-model='widget.layout.height'>
        </div>
      </fieldset>
    </section>

    <!-- CONTENT -->
    <section class='content'>
      <h3>Blocks</h3>

      <div class='blocks'>
        <a class='linechart' ng-click='test("linechart")'>Linechart</a>
        <a class='guage' ng-click='test("gauge")'>Gauge</a>
        <a class='countdown' ng-click='test("countdown")'>Countdown</a>
        <a class='sum' ng-click='test("sum")'>Sum</a>
        <a class='delta' ng-click='test("delta")'>Delta</a>
        <a class='markdown' ng-click='test("markdown")'>Markdown</a>
      </div>

      <article ng-repeat='item in widget.content' class='block'>
        <div class='options'>
          <a ng-click='contentRemove($index)' class='delete'><span>Delete</span></a>
          <a ng-click='contentEdit($index)' class='settings'><span>Edit</span></a>
        </div>
        {{ item.template }}
      </article>
    </section>

    <!-- OPTIONS -->
    <section class='settings' ng-show='editingContent'>
      <h3>Edit Content</h3>

      <div class='field'>
        <label>Source</label>
        <select type='text' ng-model='content.source'>
          <option disabled value=''>Pick one...</option>
          <option value='none'>None</option>
          <option ng-repeat='item in sources' value='{{item.value.name}}'>{{item.value.name}}</option>
        </select>
      </div>

      <div ng-repeat='(key, value) in dbWidgets[content.template] track by $id($index)'>
        <div class='field'>
          <label>{{key}}</label>
          <input type='{{value}}' ng-model='content.options[key]'>
        </div>
      </div>

      <button ng-click='contentUpdate()'>Update</button>
    </section>
  </section>

  <footer class='footer'>
    <div class='options'>
      <a ng-click='cancel()' class='cancel'>Cancel</a>
      <button ng-click='save(widget)'>Save</button>
    </div>
    <button ng-click='delete()' class='delete'>Delete</button>
  </footer>
</section>